/*! jYmbed - v0.12-beta - 2013-11-03
* http://ketshup.com.br/jymbed
* Copyright (c) 2013 Luciano Souza; Licensed MIT */

(function(e){e.fn.jYmbed=function(t){var n=/(\?v=|\&v=|\/\d\/|\/embed\/|\/v\/|\.be\/)([a-zA-Z0-9\-\_]+)/;var r={width:560,height:315,autoplay:0,rel:0,color:"red",controls:1,showinfo:1,autohide:2,loop:0,start:-1,theme:"dark"};var i=e.extend({},r,t);var s={};if(i){e.each(i,function(e,t){if(jQuery.isFunction(t)){s[e]=t}})}$dependences={};var o=function(t){if(typeof window.$youtube_api_initialized!=="undefined"){t()}else{e.getScript("//www.youtube.com/iframe_api").done(function(e,n){YT.ready(function(){window.$youtube_api_initialized=true;t()})}).fail(function(e,t,n){console.error("An error occurred while trying to download youtube's API.")})}};var u=function(e,t,n){var r=e.getDuration();var i=r/4;var o=e.getCurrentTime();var u=null;if(o>0&&o<=i){u=0}else if(o>i&&o<=i*2){u=25}else if(o>i*2&&o<=i*3){u=50}else if(o>i*3&&o<=i*4){u=75}if(typeof $dependences[t].onPlaybackViewPercent!=="undefined"){if($dependences[t].onPlaybackViewPercent!==u){$dependences[t].onPlaybackViewPercent=u;if(typeof s.onPlaybackView!=="undefined"&&u){s.onPlaybackView(u,e,t,n)}}}};var a=function(e,t,n,r){if(typeof s.onStateChange!=="undefined"){if(e.data==0){clearTimeout($dependences[n].onStateChangeTimeout)}$dependences[n].onStateChangeTimeout=setTimeout(function(){clearTimeout($dependences[n].onStateChangeTimeout);var i=["end","play","pause","buffer","cued"];s.onStateChange(typeof i[e.data]!=="undefined"?i[e.data]:"unstarted",t,n,r)},500)}};var f=this;o(function(){return f.each(function(t,o){var f=e(o);if(!f.is("[data-playerInitialized]")){var l=null;if(f.is("[data-videoId]")){l=f.attr("data-videoId")}else{var c=f.is("[data-videoUrl]")?f.attr("data-videoUrl"):f.text();var h=c.match(n);if(h){l=h[2]}}if(l){var p=Math.ceil(Math.random()*9999+1);var d=f.is("[id]")?f.attr("id"):"player-"+p;f.attr("id",d);$dependences[d]={};$dependences[d].onPlaybackViewInterval=0;$dependences[d].onPlaybackViewPercent=null;$dependences[d].onStateChangeTimeout=0;var v={};e.each(r,function(e,t){v[e]=f.is("[data-"+e+"]")?f.attr("data-"+e):i[e]});v["autoplay"]=v["autoplay"]=="true"?1:0;v["rel"]=v["rel"]=="true"?1:0;v["color"]=jQuery.inArray(v["color"],["red","white"])<0?v["color"]:"red";v["controls"]=v["controls"]=="true"?1:0;v["showinfo"]=v["showinfo"]=="true"?1:0;v["autohide"]=jQuery.inArray(v["autohide"],["0","1","2"])>=0?v["autohide"]:"2";v["loop"]=v["loop"]=="true"?1:0;v["start"]=e.isNumeric(v["start"])?v["start"]:-1;v["theme"]=jQuery.inArray(v["theme"],["light","dark"])>=0?v["theme"]:"dark";var m=new YT.Player(d,{videoId:l,width:v["width"],height:v["height"],playerVars:{autoplay:v["autoplay"],rel:v["rel"],color:v["color"],controls:v["controls"],showinfo:v["showinfo"],autohide:v["autohide"],loop:v["loop"],start:v["start"],theme:v["theme"]},events:{onReady:function(e){if(typeof s.onReady!=="undefined"){s.onReady(e,m,d,l)}},onStateChange:function(e){a(e,m,d,l);if(typeof s.onPlaybackView!==undefined){if(e.data==0){clearInterval($dependences[d].onPlaybackViewInterval)}else if(e.data==1){$dependences[d].onPlaybackViewInterval=setInterval(function(){u(m,d,l)},800)}else if(e.data==2){clearInterval($dependences[d].onPlaybackViewInterval)}}},onPlaybackQualityChange:function(e){if(typeof s.onPlaybackQualityChange!=="undefined"){s.onPlaybackQualityChange(e.data,m,d,l)}},onPlaybackRateChange:function(e){if(typeof s.onPlaybackRateChange!=="undefined"){s.onPlaybackRateChange(e,m,d,l)}}}});f.attr("data-playerInitialized",true)}}})})}})(jQuery)